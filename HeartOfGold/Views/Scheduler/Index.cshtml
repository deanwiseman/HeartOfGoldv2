@{
    ViewBag.Title = "Scheduler";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Appointments</h2>
<hr />
<a href="#" id="btnInit" class="btn btn-secondary">Initialise database!</a>
<div id="scheduler"></div>


@section Scripts
{
    @Scripts.Render("~/bundles/jqueryui");
    @Scripts.Render("~/bundles/fullcalendar");

    <script>
        $(document).ready(function () {
            $('#scheduler').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
                },
                defaultView: 'agendaDay',
                contentHeight: 500,
                editable: true,
                allDaySlot: false,
                selectable: true,
                slotMinutes: 15
            });
        })
    </script>

    <script>
        $('btnInit').click(function () {
            $.ajax({
                type: 'POST',
                url: 'Scheduler/Index',
                success: function (response) {
                    if (response == 'True') {
                        $('#scheduler').fullCalendar('refetchEvents');
                        alert('Db populated');
                    }
                    else {
                        alert('Error')
                    }
                }
            });
        });
    </script>
}
